<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>lexy: C++ parser combinator library</title><style>:root{--white:white;--header-white:rgba(255, 255, 255, .75);--background-color:#fdfdfd;--default-color:#101010;--heading-color:#0A0A0A;--link-color:#2A2A2A;--gray-highlight-color:#aaaaaa;--highlight-color:#2861ce}@media(prefers-color-scheme:dark){:root{--white:#020202;--header-white:rgba(2, 2, 2, .75);--background-color:#222222;--default-color:#efefef;--heading-color:#f5f5f5;--link-color:#d5d5d5;--gray-highlight-color:#555555}}nav#menu div.menu-container,main{max-width:1200px;margin:0 auto;padding:0 10px}@media(min-width:800px){article{max-width:900px;margin:0 auto;padding:0 10px}}html{position:relative;min-height:100%;margin:0;padding:0}body{font-family:serif;font-size:18px;color:var(--default-color);background-color:var(--background-color);width:100%;padding:0;margin:0}main{margin-bottom:75px}h1,h2,h3,h4,h5,h6{font-family:sans-serif;font-weight:700;line-height:1.15em;color:var(--heading-color);margin:0 0 .4em;hyphens:auto}h1{font-size:2em}h2{font-size:1.75em}h3{font-size:1.5em}h4{font-size:1.25em}h5{font-size:1.15em}h6{font-size:1.1em}a{color:var(--link-color);transition:color ease .3s}a:hover{color:var(--highlight-color)}a:focus{outline:none}br{margin:1em}article p,article ul,article ol,article dl,article td{hyphens:auto;text-align:justify}nav#menu{width:100%;padding:0;background-color:var(--white);border-bottom:2px solid var(--highlight-color);font-family:sans-serif;font-size:1.3em}nav#menu div.menu-container{display:flex}nav#menu div.menu-container ul{display:flex;flex-direction:row;align-items:center;padding:0;list-style:none}nav#menu div.menu-container ul li a{text-decoration:none}nav#menu div.menu-container ul li a.active{border-width:0 0 2px;border-style:solid;border-color:var(--highlight-color)}nav#menu div.menu-container ul#home{padding-left:0;padding-right:10px}nav#menu div.menu-container ul#home li{font-weight:700}nav#menu div.menu-container ul#main{margin-left:auto}nav#menu div.menu-container ul#main li{padding-left:20px}@media(max-width:600px){nav#menu div.menu-container ul#main{flex-direction:column;align-items:flex-end;margin:5px 10px 0 auto}}footer#page-footer{position:absolute;bottom:0;left:0;right:0;height:2em;display:flex;justify-content:space-between;font-size:.8em;font-weight:200;line-height:1em;border-top:1px solid #ccc}footer#page-footer section{padding-left:1em;padding-right:1em;padding-top:.5em;width:100%}footer#page-footer .copyright{text-align:left}footer#page-footer .patreon{text-align:center}footer#page-footer .poweredby{text-align:right}@media(max-width:450px){footer#page-footer{flex-direction:column;align-items:flex-start}footer#page-footer section{text-align:initial!important;width:initial}}aside.toc{display:none}@media(min-width:1200px){aside.toc{display:initial;position:sticky;top:1em;float:left;width:300px}aside.toc header{font-weight:700}aside.toc ul{list-style:none;padding:0}aside.toc ul ul{padding-left:1em;padding-bottom:.5em}aside.toc a{text-decoration:none}aside.toc~article{padding-left:300px}}article .admonitionblock{margin-bottom:1em}article .admonitionblock td.icon{width:75px;font-weight:700;border-right:1px solid var(--gray-highlight-color);padding:.5em}article .admonitionblock td.content{padding-left:.5em}article details{padding-bottom:1em}article details summary{font-weight:700}article dl dt{font-weight:700}article dl dd{margin-top:-.9em}article dl dd dt{margin-top:.9em}article div.sidebarblock{border:1px solid var(--gray-highlight-color);padding:.75em;margin:1em}article div.sidebarblock p{margin:0}article :not(td)>div.title{font-style:italic;margin-bottom:-.9em}article code{font-family:Inconsolata,monospace,sans-serif}article pre{overflow:auto;padding:10px;background:var(--white);border:1px solid var(--gray-highlight-color);line-height:1.1}article .colist{margin-top:-.5em}article .colist ol{counter-reset:list}article .colist ol li{counter-increment:list;padding-left:1em}article .colist ol ::marker{content:"(" counter(list)")";font-weight:700}article .colist p{margin:0}article .highlight{}article .highlight .c{color:#998;font-style:italic}article .highlight .k{color:#458;font-weight:700}article .highlight .o{color:red}article .highlight .p{color:red}article .highlight .err{color:red}article .highlight .cm{color:#998;font-style:italic}article .highlight .cp{color:green;font-weight:700}article .highlight .c1{color:#998;font-style:italic}article .highlight .cs{color:#999;font-weight:700;font-style:italic}article .highlight .gd{color:#000;background-color:#fdd}article .highlight .gd .x{color:#000;background-color:#faa}article .highlight .ge{font-style:italic}article .highlight .gr{color:#a00}article .highlight .gh{color:#999}article .highlight .gi{color:#000;background-color:#dfd}article .highlight .gi .x{color:#000;background-color:#afa}article .highlight .go{color:#888}article .highlight .gp{color:#555}article .highlight .gs{font-weight:700}article .highlight .gu{color:#aaa}article .highlight .gt{color:#a00}article .highlight .kc{color:#458;font-weight:700}article .highlight .kd{color:#458;font-weight:700}article .highlight .kp{color:#458;font-weight:700}article .highlight .kr{color:#458;font-weight:700}article .highlight .kt{color:#458;font-weight:700}article .highlight .m{color:#ff8000}article .highlight .s{color:green}article .highlight .ow{font-weight:700}article .highlight .w{color:#bbb}article .highlight .mf{color:#ff8000}article .highlight .mh{color:#ff8000}article .highlight .mi{color:#ff8000}article .highlight .mo{color:#ff8000}article .highlight .sb{color:#d14}article .highlight .sc{color:#d14}article .highlight .sd{color:#d14}article .highlight .s2{color:#d14}article .highlight .se{color:#d14}article .highlight .sh{color:#d14}article .highlight .si{color:#d14}article .highlight .sx{color:#d14}article .highlight .sr{color:#009926}article .highlight .s1{color:#d14}article .highlight .ss{color:#990073}article .highlight .bp{color:#999}article .highlight .vc{color:teal}article .highlight .vg{color:teal}article .highlight .vi{color:teal}article .highlight .il{color:#099}</style></head><body><nav id=menu><div class=menu-container><ul id=home><li><a href=/>lexy: C++ parser combinator library</a></li></ul><ul id=main><li><a href=/tutorial/>Tutorial</a></li><li><a href=/reference/>Reference</a></li><li><a href=/playground/>Playground</a></li><li><a href=https://github.com/foonathan/lexy>GitHub</a></li></ul></nav><main><aside class=toc><header><a href=#>Table of Contents</a></header><nav id=TableOfContents></nav></aside><article><div class=paragraph><p>This benchmark measures the time it takes to <strong>validate</strong> JSON, i.e. to check whether it is well-formed.
Validation was chosen as opposed to parsing, as parsing speed depends on the JSON data structure as well.
Implementing an efficient JSON container is out of scope for lexy, so it would have a disadvantage over the specialized JSON libraries.</p></div><div class=paragraph><p>The average validation times for each input are shown in the boxplots below.
Lower values are better.</p></div><script src=https://cdn.plot.ly/plotly-latest.min.js></script><div id=canada.json></div><script>var data=[{name:'baseline',y:[.0010595279,.0009820979,.0009752716,.000963508909090909,.000943407909090909,.000994879166666667,.00097578675,.000947775636363636,.000991962833333333,.00103912972727273,946212e-9]},{name:'lexy',y:[.0070282477,.0070637025,.0068492612,.00715079081818182,.00700888745454545,.00651435583333333,.006374665,.006411541,.00643064516666667,.00648394245454545,.007111323]},{name:'pegtl',y:[.0088168012,.0088228322,.0090108265,.00966334509090909,.00879848618181818,.008745692,.00866752483333333,.00883686718181818,.0088816675,.00884818618181818,.0090566842]},{name:'nlohmann/json',y:[.0542415254,.0501635091,.0532300329,.0548515691818182,.0546348205454545,.05157700175,.0528931271666667,.053215351,.052994984,.0546748400909091,.0533682128]},{name:'rapidjson',y:[.0090712376,.0091324836,.0088126635,.00907213845454545,.008869926,.00884036108333333,.00883508316666667,.00877655745454545,.00896551891666667,.00892991709090909,.0089025292]},{name:'Boost.JSON',y:[.0057998596,.0055966795,.0058439218,.00590282727272727,.00569769581818182,.00581919725,.005506336,.00573157109090909,.00533995108333333,.00570554045454545,.0057702006]}],title='canada.json',layout;data=data.map(a=>Object.assign(a,{boxpoints:'all',pointpos:0,type:'box'})),layout={title:{text:title},showlegend:!1,yaxis:{title:'validation time',rangemode:'tozero',autorange:!0}},Plotly.newPlot('canada.json',data,layout,{responsive:!0})</script><div id=citm_catalog.json></div><script>var data=[{name:'baseline',y:[.0007881871,.0007903831,.0007901379,.000727277454545455,.000714379181818182,.000720246416666667,.000727308416666667,.000719848636363636,.000720977666666667,.000719981090909091,721669e-9]},{name:'lexy',y:[.0048419059,.0046964798,.0045237165,.00484476427272727,.00477582318181818,.00496354841666667,.00451812208333333,.00451419736363636,.00451071391666667,.00453643718181818,.0047096561]},{name:'pegtl',y:[.0090702049,.0087323583,.0086367936,.00871977663636364,.00863479181818182,.00883690541666667,.00884290766666667,.00863972818181818,.00860174008333333,.00867296272727273,.0086394153]},{name:'nlohmann/json',y:[.0177782142,.0171569946,.0173087362,.0173981899090909,.0178180962727273,.0173801638333333,.0170941150833333,.0177144986363636,.0178074733333333,.01692339,.0167348514]},{name:'rapidjson',y:[.0043638804,.0045434774,.0043347506,.00419329736363636,.00454067809090909,.00416553041666667,.004124593,.00428866663636364,.00448545891666667,.00467543072727273,.0041967698]},{name:'Boost.JSON',y:[.0016192291,.0017044904,.0016227581,.00173461336363636,.00186224918181818,.00191337033333333,.00191171433333333,.00185218245454545,.00196823075,.00190383045454545,.0016757686]}],title='citm_catalog.json',layout;data=data.map(a=>Object.assign(a,{boxpoints:'all',pointpos:0,type:'box'})),layout={title:{text:title},showlegend:!1,yaxis:{title:'validation time',rangemode:'tozero',autorange:!0}},Plotly.newPlot('citm_catalog.json',data,layout,{responsive:!0})</script><div id=twitter.json></div><script>var data=[{name:'baseline',y:[.0002847102,.0002917373,.0002919538,.000281532727272727,.000278282818181818,.00029136375,.0002916525,.000290941909090909,.000264533416666667,.000270055818181818,251024e-9]},{name:'lexy',y:[.0028251427,.0030127183,.0028550995,.00296784627272727,.00277675418181818,.00282428483333333,.00276201758333333,.002751982,.00276274283333333,.00307002890909091,.0035005372]},{name:'pegtl',y:[.0060372867,.0057591499,.0058065634,.00570343927272727,.005723015,.00575593575,.0056773615,.005797577,.00570959041666667,.00572804245454545,.0056419681]},{name:'nlohmann/json',y:[.0073820559,.0067882804,.0069664014,.00712269,.00793137390909091,.00829576825,.00711130666666667,.00675361863636364,.00716391741666667,.00713932927272727,.0073270619]},{name:'rapidjson',y:[.002129071,.0020903388,.0022532776,.00214005145454545,.00216548990909091,.00215158608333333,.00215539158333333,.00208061845454545,.00217175958333333,.00214550436363636,.0022374568]},{name:'Boost.JSON',y:[.0010918026,.0011009075,.0012088634,.00117331290909091,.00119816209090909,.00118386733333333,.00118079433333333,.00119776881818182,.00114101775,.00117392381818182,.0011794521]}],title='twitter.json',layout;data=data.map(a=>Object.assign(a,{boxpoints:'all',pointpos:0,type:'box'})),layout={title:{text:title},showlegend:!1,yaxis:{title:'validation time',rangemode:'tozero',autorange:!0}},Plotly.newPlot('twitter.json',data,layout,{responsive:!0})</script><div class=dlist><div class=title>The implementations</div><dl><dt class=hdlist1><code>baseline</code></dt><dd><p>This simply adds all input characters of the JSON document without performing actual validation.</p></dd><dt class=hdlist1><code>lexy</code></dt><dd><p>A JSON validator using the lexy grammar from the example.</p></dd><dt class=hdlist1><code>pegtl</code></dt><dd><p>A JSON validator using the <a href=https://github.com/taocpp/PEGTL>PEGTL</a> JSON grammar.</p></dd><dt class=hdlist1><code>nlohmann/json</code></dt><dd><p>A JSON validator using <a href=https://github.com/nlohmann/json>JSON for Modern C++</a> implemented by <code>nlohmann::json::accept()</code>.</p></dd><dt class=hdlist1><code>rapidjson</code></dt><dd><p>A JSON validator using <a href=https://github.com/Tencent/rapidjson>rapidjson</a> implemented using a SAX parser with the <code>rapidjson::BaseReaderHandler</code>.</p></dd><dt class=hdlist1><code>Boost.JSON</code></dt><dd><p>A JSON validator using <a href=https://github.com/boostorg/json>Boost.JSON</a> implemented using a custom parse handler.</p></dd></dl></div><div class=dlist><div class=title>The inputs</div><dl><dt class=hdlist1><code>canada.json</code></dt><dd><p>Contains lots of 2-element arrays holding floating-point coordinate pairs.
Taken from <a href=https://github.com/miloyip/nativejson-benchmark class=bare>https://github.com/miloyip/nativejson-benchmark</a>.</p></dd><dt class=hdlist1><code>citm_catalog.json</code></dt><dd><p>Big JSON file with some variety.
Taken from <a href=https://github.com/miloyip/nativejson-benchmark class=bare>https://github.com/miloyip/nativejson-benchmark</a>.</p></dd><dt class=hdlist1><code>twitter.json</code></dt><dd><p>Some data from twitter’s API.
Taken from <a href=https://github.com/miloyip/nativejson-benchmark class=bare>https://github.com/miloyip/nativejson-benchmark</a>.</p></dd></dl></div><div class=paragraph><div class=title>The Methodology</div><p>The input data is read using <code>lexy::read_file()</code>.
The resulting buffer is then passed to the various implementations using their memory inputs.
Benchmarking is done by <a href=https://nanobench.ankerl.com/>nanobench</a> on an AMD FX-6300.</p></div></article></main><footer id=page-footer><section class=copyright>&copy; 2020-2021</section><section class=patreon><a target=_blank href=https://jonathanmueller.dev/support-me/>Support me!</a>.</section><section class=poweredby>Made with <a target=_blank href=https://gohugo.io>Hugo</a>.</section></footer></body></html>